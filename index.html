<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Econnect | Plataforma de Sostenibilidad Ambiental</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjJjNTVlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIxIDEyYzAgMS4xLS45IDItMiAySDVjLTEuMSAwLTItLjktMi0yVjZjMC0xLjEuOS0yIDItMmgxNGMxLjEgMCAyIC45IDIgMnYxeiI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEyaDEydjhjMCAxLjEtLjkgMi0yIDJIOGMtMS4xIDAtMi0uOS0yLTJ2LTh6Ij48L3BhdGg+PHBhdGggZD0iTTEyIDEyVjIyIj48L3BhdGg+PHBhdGggZD0iTTEyIDJ2NCIgc3Ryb2tlPSIjMjJjNTVlIj48L3BhdGg+PHBhdGggZD0iTTE2IDEyYzAgMi4yLTEuOCA0LTQgNC0yLjIgMC00LTEuOC00LTQgMC0yLjIgMS44LTQgNC00IDIuMiAwIDQgMS44IDQgNHoiIGZpbGw9IiMyMmM1NWUiIHN0cm9rZT0ibm9uZSI+PC9wYXRoPjwvc3ZnPg==" />
    <link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjJjNTVlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIxIDEyYzAgMS4xLS45IDItMiAySDVjLTEuMSAwLTItLjktMi0yVjZjMC0xLjEuOS0yIDItMmgxNGMxLjEgMCAyIC45IDIgMnYxeiI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEyaDEydjhjMCAxLjEtLjkgMi0yIDJIOGMtMS4xIDAtMi0uOS0yLTJ2LTh6Ij48L3BhdGg+PHBhdGggZD0iTTEyIDEyVjIyIj48L3BhdGg+PHBhdGggZD0iTTEyIDJ2NCIgc3Ryb2tlPSIjMjJjNTVlIj48L3BhdGg+PHBhdGggZD0iTTE2IDEyYzAgMi4yLTEuOCA0LTQgNC0yLjIgMC00LTEuOC00LTQgMC0yLjIgMS44LTQgNC00IDIuMiAwIDQgMS44IDQgNHoiIGZpbGw9IiMyMmM1NWUiIHN0cm9rZT0ibm9uZSI+PC9wYXRoPjwvc3ZnPg==" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <header>
        <div class="header-content">
            <a href="javascript:void(0);" onclick="volverInicio()" class="logo-link">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <span class="logo-text">Econnect</span>
                </div>
            </a>
            <!-- Navegación para usuarios no autenticados -->
            <nav class="nav-buttons" id="auth-nav" style="display: none;">
                <button class="btn btn-secondary" onclick="mostrarFormularioLogin()">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="btn-text">Iniciar Sesión</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarFormularioRegistro()">
                    <i class="fas fa-user-plus"></i>
                    <span class="btn-text">Registrarse</span>
                </button>
            </nav>
            <!-- Navegación para usuarios autenticados -->
            <nav class="nav-buttons desktop-nav" id="main-nav" style="display: none;">
                <button class="btn btn-primary" onclick="mostrarSeccion('progreso')">
                    <i class="fas fa-chart-line"></i>
                    <span>Progreso</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('desafios')">
                    <i class="fas fa-tasks"></i>
                    <span>Desafíos</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('recompensas')">
                    <i class="fas fa-trophy"></i>
                    <span>Recompensas</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('videos')">
                    <i class="fas fa-play-circle"></i>
                    <span>Videos</span>
                </button>
                <button class="btn btn-secondary btn-icon" id="perfilBtn" onclick="verPerfil()">
                    <i class="fas fa-user"></i>
                </button>
                <button class="btn btn-danger btn-icon" id="cerrarBtn" onclick="cerrarSesion()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Barra de navegación inferior para móviles -->
    <nav class="mobile-nav" id="mobile-nav" style="display: none;">
        <button class="nav-item" onclick="mostrarSeccion('progreso')">
            <i class="fas fa-chart-line"></i>
            <span>Progreso</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('desafios')">
            <i class="fas fa-tasks"></i>
            <span>Desafíos</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('recompensas')">
            <i class="fas fa-trophy"></i>
            <span>Recompensas</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('videos')">
            <i class="fas fa-play-circle"></i>
            <span>Videos</span>
        </button>
    </nav>

    <div class="container">
        <div class="intro-section">
            <div class="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Reciclaje">
                        <div class="carousel-caption">
                            <h2>Reciclaje Transformador</h2>
                            <p>El reciclaje no es solo separar residuos, es transformar hábitos de consumo y reducir nuestra huella ecológica global. En Econnect, incentivamos prácticas sostenibles con impacto medible.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1559825481-12a05cc00344?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Conservación del agua">
                        <div class="carousel-caption">
                            <h2>Protección del Agua</h2>
                            <p>El agua es el recurso más valioso del planeta. Nuestros programas de conservación incluyen sistemas de monitoreo, reducción de consumo y protección de cuencas hidrográficas.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1523712999610-f77fbcfc3843?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Energías renovables">
                        <div class="carousel-caption">
                            <h2>Energía Sostenible</h2>
                            <p>La transición energética es clave para combatir el cambio climático. Apoyamos iniciativas de energía solar, eólica y alternativas que reducen emisiones de carbono en comunidades locales.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1511884642898-4c92249e20b6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Biodiversidad">
                        <div class="carousel-caption">
                            <h2>Protección de Ecosistemas</h2>
                            <p>La biodiversidad es fundamental para la resiliencia del planeta. Nuestros proyectos de conservación ayudan a preservar hábitats críticos y especies en peligro de extinción.</p>
                        </div>
                    </div>
                </div>
                <div class="carousel-controls">
                    <button class="carousel-control" onclick="moverCarrusel(-1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-control" onclick="moverCarrusel(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="carousel-indicators">
                    <span class="indicator active" onclick="irASlide(0)"></span>
                    <span class="indicator" onclick="irASlide(1)"></span>
                    <span class="indicator" onclick="irASlide(2)"></span>
                    <span class="indicator" onclick="irASlide(3)"></span>
                </div>
            </div>

            <div class="app-description">
                <h2>Bienvenido a Econnect</h2>
                <p>Econnect es una plataforma innovadora diseñada para inspirar y recompensar acciones positivas hacia el medio ambiente. Nuestra misión es conectar a personas comprometidas con la sostenibilidad y crear un impacto real en nuestro planeta.</p>

                <!-- Nueva sección de estadísticas de contaminación -->
                <div class="stats-section">
                    <h3>Estadísticas Globales de Contaminación</h3>
                    <p class="stats-intro">La contaminación ambiental es uno de los mayores desafíos que enfrenta nuestro planeta. Estas cifras nos muestran la urgencia de actuar.</p>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-trash"></i>
                            </div>
                            <div class="stat-number" id="plasticStat">8.3</div>
                            <div class="stat-unit">mil millones de toneladas</div>
                            <div class="stat-description">de plástico producido desde 1950, del cual solo el 9% ha sido reciclado</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-smog"></i>
                            </div>
                            <div class="stat-number" id="airStat">7</div>
                            <div class="stat-unit">millones de personas</div>
                            <div class="stat-description">mueren anualmente por enfermedades relacionadas con la contaminación del aire</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-water"></i>
                            </div>
                            <div class="stat-number" id="waterStat">80%</div>
                            <div class="stat-unit">de aguas residuales</div>
                            <div class="stat-description">se vierten sin tratar en ríos, lagos y océanos a nivel mundial</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-temperature-high"></i>
                            </div>
                            <div class="stat-number" id="co2Stat">36.8</div>
                            <div class="stat-unit">mil millones de toneladas</div>
                            <div class="stat-description">de CO₂ emitidas anualmente por actividades humanas</div>
                        </div>
                    </div>

                    <div class="stats-source">Fuente: ONU Medio Ambiente, OMS, Global Carbon Project (2023)</div>
                </div>

                <div class="app-features">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3>Desafíos Verdes</h3>
                        <p>Participa en desafíos ecológicos y gana puntos mientras ayudas al planeta.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <h3>Recompensas</h3>
                        <p>Obtén insignias y cupones de descuento por tus acciones ambientales.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Comunidad</h3>
                        <p>Únete a una comunidad de personas comprometidas con el medio ambiente.</p>
                    </div>
                </div>

                <!-- Nueva sección de patrocinadores -->
                <div class="sponsors-section">
                    <h3 class="section-title">Nuestros Patrocinadores</h3>
                    <p class="sponsors-intro">Estas empresas apoyan nuestros esfuerzos para crear un futuro más sostenible.</p>
                    <div class="sponsors-grid">
                        <!-- Patrocinador 1: Lego -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/2/24/LEGO_logo.svg" alt="Lego">
                            </div>
                            <div class="sponsor-info">
                                <h4>Lego</h4>
                                <p>Comprometidos con la sostenibilidad y la creación de juguetes ecológicos para las futuras generaciones.</p>
                                <span class="sponsor-level platinum">Patrocinador Platino</span>
                            </div>
                        </div>

                        <!-- Patrocinador 2: Adidas -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/2/20/Adidas_Logo.svg" alt="Adidas">
                            </div>
                            <div class="sponsor-info">
                                <h4>Adidas</h4>
                                <p>Innovando en materiales reciclados y prácticas sostenibles en la industria de la moda deportiva.</p>
                                <span class="sponsor-level gold">Patrocinador Oro</span>
                            </div>
                        </div>

                        <!-- Patrocinador 3: Microsoft -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft">
                            </div>
                            <div class="sponsor-info">
                                <h4>Microsoft</h4>
                                <p>Liderando iniciativas de tecnología verde y comprometidos con la neutralidad de carbono.</p>
                                <span class="sponsor-level gold">Patrocinador Oro</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="start-button" onclick="mostrarFormularioRegistro()">
                    Comienza tu viaje verde
                </button>

                <!-- Nueva sección ¿Quiénes Somos? -->
                <div class="who-we-are-section">
                    <h3 class="section-title">¿Quiénes Somos?</h3>
                    <p>Econnect es una plataforma dedicada a fomentar la sostenibilidad ambiental y el compromiso ecológico en nuestra comunidad. Nuestra misión es empoderar a los estudiantes y la sociedad en general para que adopten hábitos más verdes a través de desafíos interactivos y recompensas significativas. Creemos firmemente que, al conectar la acción individual con el impacto colectivo, podemos construir un futuro más sostenible para todos.</p>
                    <p>La aplicación Econnect es una herramienta innovadora diseñada para incentivar y recompensar las prácticas sostenibles. Aquí, los usuarios pueden participar en desafíos ecológicos, ganar puntos por sus acciones y canjearlos por recompensas académicas y otros beneficios. Nuestro objetivo es hacer que la sostenibilidad sea accesible, divertida y gratificante, inspirando a una nueva generación de líderes ambientales.</p>
                </div>
            </div>
        </div>

        <!-- Formulario de registro -->
        <main id="registro" class="auth-container">
            <h2 class="card-title">Crear Usuario</h2>
            <div class="form-group">
                <label for="correo">Correo Electrónico</label>
                <input type="email" id="correo" placeholder="tu@email.com" required>
            </div>
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" placeholder="Tu nombre" required>
            </div>
            <div class="form-group">
                <label for="apellidoPaterno">Apellido Paterno</label>
                <input type="text" id="apellidoPaterno" placeholder="Tu apellido paterno" required>
            </div>
            <div class="form-group">
                <label for="apellidoMaterno">Apellido Materno</label>
                <input type="text" id="apellidoMaterno" placeholder="Tu apellido materno" required>
            </div>
            <div class="form-group">
                <label for="matricula">Matrícula</label>
                <input type="text" id="matricula" placeholder="Tu número de matrícula" required>
            </div>
            <div class="form-group">
                <label for="materia">Materia</label>
                <input type="text" id="materia" placeholder="Nombre de la materia" required>
            </div>
            <div class="form-group">
                <label for="grado">Semestre</label>
                <select id="grado" required>
                    <option value="">Selecciona tu semestre</option>
                    <option value="1A">Primer Semestre - Grupo A</option>
                    <option value="1B">Primer Semestre - Grupo B</option>
                    <option value="1C">Primer Semestre - Grupo C</option>
                    <option value="2A">Segundo Semestre - Grupo A</option>
                    <option value="2B">Segundo Semestre - Grupo B</option>
                    <option value="2C">Segundo Semestre - Grupo C</option>
                    <option value="3A">Tercer Semestre - Grupo A</option>
                    <option value="3B">Tercer Semestre - Grupo B</option>
                    <option value="3C">Tercer Semestre - Grupo C</option>
                    <option value="4A">Cuarto Semestre - Grupo A</option>
                    <option value="4B">Cuarto Semestre - Grupo B</option>
                    <option value="4C">Cuarto Semestre - Grupo C</option>
                    <option value="5A">Quinto Semestre - Grupo A</option>
                    <option value="5B">Quinto Semestre - Grupo B</option>
                    <option value="5C">Quinto Semestre - Grupo C</option>
                    <option value="6A">Sexto Semestre - Grupo A</option>
                    <option value="6B">Sexto Semestre - Grupo B</option>
                    <option value="6C">Sexto Semestre - Grupo C</option>
                    <option value="7A">Séptimo Semestre - Grupo A</option>
                    <option value="7B">Séptimo Semestre - Grupo B</option>
                    <option value="7C">Séptimo Semestre - Grupo C</option>
                    <option value="8A">Octavo Semestre - Grupo A</option>
                    <option value="8B">Octavo Semestre - Grupo B</option>
                    <option value="8C">Octavo Semestre - Grupo C</option>
                    <option value="9A">Noveno Semestre - Grupo A</option>
                    <option value="9B">Noveno Semestre - Grupo B</option>
                    <option value="9C">Noveno Semestre - Grupo C</option>
                </select>
            </div>
            <div class="form-group">
                <label for="clave">Contraseña</label>
                <input type="password" id="clave" placeholder="••••••••" required>
            </div>
            <button class="btn btn-primary" onclick="crearUsuario()">
                <i class="fas fa-user-plus"></i>
                Crear Usuario
            </button>
            <p class="login-register-toggle" onclick="mostrarFormularioLogin()">
                ¿Ya tienes cuenta? <span style="color: var(--primary-color); cursor: pointer;">Inicia sesión</span>
            </p>
        </main>

        <!-- Formulario de inicio de sesión -->
        <main id="login" class="auth-container">
            <h2 class="card-title">Iniciar Sesión</h2>
            <div class="form-group">
                <label for="identificador">Matrícula o Correo Electrónico</label>
                <input type="text" id="identificador" placeholder="Ingresa tu matrícula o correo electrónico" required>
            </div>
            <div class="form-group">
                <label for="claveLogin">Contraseña</label>
                <input type="password" id="claveLogin" placeholder="••••••••" required>
            </div>
            <button class="btn btn-primary" onclick="iniciarSesion()">
                <i class="fas fa-sign-in-alt"></i>
                Iniciar Sesión
            </button>
            <p class="login-register-toggle" onclick="mostrarFormularioRegistro()">
                ¿No tienes cuenta? <span style="color: var(--primary-color); cursor: pointer;">Regístrate</span>
            </p>
            <p class="forgot-password" onclick="mostrarRecuperarContrasena()">
                <span style="color: var(--primary-color); cursor: pointer; font-size: 0.9rem;">
                    <i class="fas fa-key"></i> ¿Olvidaste tu contraseña?
                </span>
            </p>
        </main>

        <!-- Dashboard principal modificado -->
        <main id="app">
            <div id="progreso" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Tu Progreso</h2>
                        <span class="badge" id="nivel-badge">Nivel 1</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                        <p style="text-align: right; font-size: 0.875rem; color: #64748b;">45/700 puntos</p>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 1rem;">
                        <div style="text-align: center">
                            <i class="fas fa-trophy" style="color: #fbbf24; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">3 Logros</p>
                        </div>
                        <div style="text-align: center">
                            <i class="fas fa-medal" style="color: #60a5fa; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">5 Insignias</p>
                        </div>
                        <div style="text-align: center">
                            <i class="fas fa-star" style="color: #f59e0b; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">2 Premios</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="desafios" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Desafíos Activos</h2>
                        <div class="challenge-filter">
                            <select id="filter-challenge" onchange="filtrarDesafios()">
                                <option value="todos">Todos los desafíos</option>
                                <option value="facil">Dificultad: Fácil</option>
                                <option value="medio">Dificultad: Medio</option>
                                <option value="dificil">Dificultad: Difícil</option>
                            </select>
                        </div>
                    </div>
                    <div class="challenges-grid">
                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Mes del Termo y Tupper</h3>
                                <span class="challenge-status">28 Jun - 19 Jul</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">100 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Durante el mes de junio y julio, usa tu termo y tupper para reducir el uso de plásticos desechables.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-primary" onclick="mostrarPDF('termo-tupper')">
                                    <i class="fas fa-book"></i>
                                    Leer Guía
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence1">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence1" onchange="subirEvidencia(1)">
                                </div>
                                <button class="btn btn-secondary complete-task-btn" id="completeTask1" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(1)">
                                    <i class="fas fa-check-circle"></i> Marcar como Completado
                                </button>
                            </div>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Lleva tu Bolsa Ecológica</h3>
                                <span class="challenge-status">0/1</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">50 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Usa bolsas ecológicas en lugar de bolsas de plástico durante tus compras en el supermercado.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-primary" onclick="mostrarPDF('bolsa-ecologica')">
                                    <i class="fas fa-book"></i>
                                    Leer Guía
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence2">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence2" onchange="subirEvidencia(2)">
                                </div>
                                <button class="btn btn-secondary complete-task-btn" id="completeTask2" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(2)">
                                    <i class="fas fa-check-circle"></i> Marcar como Completado
                                </button>
                            </div>
                        </div>

                        <div class="challenge-card" data-difficulty="medio">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Trueque de Prendas</h3>
                                <span class="challenge-status">0/1</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge medium">Medio</span>
                                <span class="challenge-badge points">150 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Participa en un intercambio de ropa para dar nueva vida a prendas que ya no uses.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-primary" onclick="mostrarPDF('trueque-prendas')">
                                    <i class="fas fa-book"></i>
                                    Leer Guía
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence3">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence3" onchange="subirEvidencia(3)">
                                </div>
                                <button class="btn btn-secondary complete-task-btn" id="completeTask3" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(3)">
                                    <i class="fas fa-check-circle"></i> Marcar como Completado
                                </button>
                            </div>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Ahorra Agua</h3>
                                <span class="challenge-status">0/1</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">75 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Coloca una botella llena de agua en la caja del inodoro para reducir el consumo de agua en cada descarga.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-primary" onclick="mostrarPDF('ahorro-agua')">
                                    <i class="fas fa-book"></i>
                                    Leer Guía
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence4">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence4" onchange="subirEvidencia(4)">
                                </div>
                                <button class="btn btn-secondary complete-task-btn" id="completeTask4" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(4)">
                                    <i class="fas fa-check-circle"></i> Marcar como Completado
                                </button>
                            </div>
                        </div>

                        <div class="challenge-card" data-difficulty="medio">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Recolección de PET</h3>
                                <span class="challenge-status">0/5 kg</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge medium">Medio</span>
                                <span class="challenge-badge points">200 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Recolecta 5 kilogramos de botellas PET para reciclaje.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-primary" onclick="mostrarPDF('recoleccion-pet')">
                                    <i class="fas fa-book"></i>
                                    Leer Guía
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence5">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence5" onchange="subirEvidencia(5)">
                                </div>
                                <button class="btn btn-primary complete-task-btn" id="completeTask5" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(5)">
                                    <i class="fas fa-check-circle"></i> Marcar como Completado
                                </button>
                            </div>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Recolección de Tapitas</h3>
                                <span class="challenge-status">0/100</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">80 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Recolecta 100 tapitas de plástico para reciclaje.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-primary" onclick="mostrarPDF('recoleccion-tapitas')">
                                    <i class="fas fa-book"></i>
                                    Leer Guía
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence6">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence6" onchange="subirEvidencia(6)">
                                </div>
                                <button class="btn btn-primary complete-task-btn" id="completeTask6" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(6)">
                                    <i class="fas fa-check-circle"></i> Marcar como Completado
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal para visualizar PDF -->
            <div id="pdfModal" class="modal" style="display: none;">
                <div class="modal-content pdf-modal">
                    <div class="modal-header">
                        <h3 id="pdfTitle">Guía del Desafío</h3>
                        <button class="close-button" onclick="cerrarPDF()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <iframe id="pdfViewer" width="100%" height="100%" frameborder="0"></iframe>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" onclick="marcarPDFLeido()">
                            <i class="fas fa-check"></i>
                            He leído la guía
                        </button>
                    </div>
                </div>
            </div>

            <style>
                /* Estilos para el modal de PDF */
                .pdf-modal {
                    max-width: 95%;
                    width: 95%;
                    height: 95vh;
                    display: flex;
                    flex-direction: column;
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                    position: relative;
                }

                .modal-header {
                    padding: 1rem;
                    border-bottom: 1px solid #e2e8f0;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    background: #f8fafc;
                    border-radius: 12px 12px 0 0;
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    z-index: 2;
                }

                .modal-header h3 {
                    margin: 0;
                    color: #1e293b;
                    font-size: 1.25rem;
                }

                .close-button {
                    background: none;
                    border: none;
                    font-size: 1.25rem;
                    color: #64748b;
                    cursor: pointer;
                    padding: 0.5rem;
                    transition: color 0.2s;
                }

                .close-button:hover {
                    color: #1e293b;
                }

                .modal-body {
                    flex: 1;
                    padding: 0;
                    overflow: hidden;
                    background: #f8fafc;
                    margin-top: 3.5rem; /* Espacio para el header */
                    margin-bottom: 3.5rem; /* Espacio para el footer */
                }

                #pdfViewer {
                    width: 100%;
                    height: 100%;
                    border: none;
                    background: white;
                }

                .modal-footer {
                    padding: 1rem;
                    border-top: 1px solid #e2e8f0;
                    text-align: right;
                    background: #f8fafc;
                    border-radius: 0 0 12px 12px;
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    z-index: 2;
                }

                .modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                }

                /* Estilos para el botón de confirmación */
                .modal-footer .btn-primary {
                    padding: 0.5rem 1rem;
                    font-size: 0.875rem;
                    font-weight: 500;
                    display: inline-flex;
                    align-items: center;
                    gap: 0.5rem;
                    transition: all 0.2s;
                }

                .modal-footer .btn-primary:hover {
                    transform: translateY(-1px);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                }

                /* Estilos para dispositivos móviles */
                @media (max-width: 768px) {
                    .pdf-modal {
                        max-width: 100%;
                        width: 100%;
                        height: 100vh;
                        border-radius: 0;
                    }

                    .modal-header {
                        padding: 0.75rem;
                        border-radius: 0;
                    }

                    .modal-header h3 {
                        font-size: 1rem;
                    }

                    .modal-body {
                        margin-top: 3rem;
                        margin-bottom: 3rem;
                    }

                    .modal-footer {
                        padding: 0.75rem;
                        border-radius: 0;
                    }

                    .modal-footer .btn-primary {
                        width: 100%;
                        justify-content: center;
                        padding: 0.75rem;
                    }
                }

                /* Estilos para pantallas grandes */
                @media (min-width: 1200px) {
                    .pdf-modal {
                        max-width: 90%;
                        width: 90%;
                    }

                    .modal-header {
                        padding: 1.25rem;
                    }

                    .modal-header h3 {
                        font-size: 1.5rem;
                    }

                    .modal-body {
                        margin-top: 4rem;
                        margin-bottom: 4rem;
                    }

                    .modal-footer {
                        padding: 1.25rem;
                    }
                }
            </style>

            <script>
                function mostrarPDF(desafioId) {
                    const pdfModal = document.getElementById('pdfModal');
                    const pdfViewer = document.getElementById('pdfViewer');
                    const pdfTitle = document.getElementById('pdfTitle');
                    
                    // Configurar el título según el desafío
                    switch(desafioId) {
                        case 'termo-tupper':
                            pdfTitle.textContent = 'Guía: Mes del Termo y Tupper';
                            pdfViewer.src = 'pdfs/Mes del Termo y Topper .pdf';
                            break;
                        case 'bolsa-ecologica':
                            pdfTitle.textContent = 'Guía: Bolsa Ecológica';
                            pdfViewer.src = 'pdfs/Trae tu bolsa ecológica.pdf';
                            break;
                        case 'trueque-prendas':
                            pdfTitle.textContent = 'Guía: Trueque de Prendas';
                            pdfViewer.src = 'pdfs/Trueque de prendas.pdf';
                            break;
                        case 'ahorro-agua':
                            pdfTitle.textContent = 'Guía: Ahorra Agua';
                            pdfViewer.src = 'pdfs/Ahorra agua con una botella.pdf';
                            break;
                        case 'recoleccion-pet':
                            pdfTitle.textContent = 'Guía: Recolección de PET';
                            pdfViewer.src = 'pdfs/Recicla PET.pdf';
                            break;
                        case 'recoleccion-tapitas':
                            pdfTitle.textContent = 'Guía: Recolección de Tapitas';
                            pdfViewer.src = 'pdfs/Recicla tapitas.pdf';
                            break;
                    }
                    
                    pdfModal.style.display = 'flex';
                }

                function cerrarPDF() {
                    const pdfModal = document.getElementById('pdfModal');
                    const pdfViewer = document.getElementById('pdfViewer');
                    pdfViewer.src = '';
                    pdfModal.style.display = 'none';
                }

                function marcarPDFLeido() {
                    const usuarioActual = JSON.parse(localStorage.getItem('usuario_actual'));
                    if (usuarioActual) {
                        if (!usuarioActual.pdfsLeidos) {
                            usuarioActual.pdfsLeidos = [];
                        }
                        const pdfActual = document.getElementById('pdfViewer').src.split('/').pop();
                        if (!usuarioActual.pdfsLeidos.includes(pdfActual)) {
                            usuarioActual.pdfsLeidos.push(pdfActual);
                            localStorage.setItem('usuario_actual', JSON.stringify(usuarioActual));
                        }
                    }
                    cerrarPDF();
                }

                function completarDesafio(desafioId) {
                    const usuarioActual = JSON.parse(localStorage.getItem('usuario_actual'));
                    if (usuarioActual) {
                        const pdfActual = document.getElementById('pdfViewer').src.split('/').pop();
                        if (!usuarioActual.pdfsLeidos || !usuarioActual.pdfsLeidos.includes(pdfActual)) {
                            alert('Por favor, lee la guía antes de completar el desafío.');
                            return;
                        }
                        
                        // Lógica para completar el desafío
                        if (!usuarioActual.desafiosCompletados) {
                            usuarioActual.desafiosCompletados = [];
                        }
                        if (!usuarioActual.desafiosCompletados.includes(desafioId)) {
                            usuarioActual.desafiosCompletados.push(desafioId);
                            usuarioActual.puntos += 100; // Puntos por completar el desafío
                            localStorage.setItem('usuario_actual', JSON.stringify(usuarioActual));
                            alert('¡Desafío completado! Has ganado 100 puntos.');
                        } else {
                            alert('Ya has completado este desafío.');
                        }
                    }
                }
            </script>

            <div id="recompensas" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Concurso de Excelencia Ambiental</h2>
                        <div class="competition-status">
                            <span class="status-badge">Fase Actual: <span id="current-phase">Recolección</span></span>
                            <span class="total-credits">Puntos: <span id="user-credits">350</span></span>
                        </div>
                    </div>

                    <!-- Sección de Ranking -->
                    <div class="ranking-section">
                        <h3 class="section-title">Ranking de Participantes</h3>
                        <div class="ranking-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Posición</th>
                                        <th>Participante</th>
                                        <th>Puntos</th>
                                        <th>Nivel</th>
                                    </tr>
                                </thead>
                                <tbody id="ranking-body">
                                    <!-- Se llenará dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Sección de Premios -->
                    <div class="rewards-section">
                        <h3 class="section-title">Canjear Puntos de Calificación</h3>
                        <p class="section-description">Tus puntos pueden ser canjeados por puntos adicionales en tu calificación final.</p>
                        
                        <div class="rewards-grid">
                            <!-- 1 Punto Extra -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-star" style="color: #FFC107;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>1 Punto Extra</h4>
                                    <p>Agrega 1 punto a tu calificación final</p>
                                    <div class="reward-cost">800 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('punto_1', 800)">
                                    Canjear
                                </button>
                            </div>

                            <!-- 2 Puntos Extra -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-star" style="color: #FFC107;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>2 Puntos Extra</h4>
                                    <p>Agrega 2 puntos a tu calificación final</p>
                                    <div class="reward-cost">1500 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('punto_2', 1500)">
                                    Canjear
                                </button>
                            </div>

                            <!-- 3 Puntos Extra -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-star" style="color: #FFC107;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>3 Puntos Extra</h4>
                                    <p>Agrega 3 puntos a tu calificación final</p>
                                    <div class="reward-cost">2000 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('punto_3', 2000)">
                                    Canjear
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Nueva Sección: Liberación de Horas de Servicio Social -->
                    <div class="rewards-section">
                        <h3 class="section-title">Liberación de Horas de Servicio Social</h3>
                        <p class="section-description">Canjea tus puntos por horas de servicio social liberadas</p>
                        
                        <div class="rewards-grid">
                            <!-- 10 Horas -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-clock" style="color: #22c55e;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>10 Horas</h4>
                                    <p>Liberación de 10 horas de servicio social</p>
                                    <div class="reward-cost">500 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('horas_10', 500)">
                                    Canjear
                                </button>
                            </div>

                            <!-- 20 Horas -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-clock" style="color: #22c55e;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>20 Horas</h4>
                                    <p>Liberación de 20 horas de servicio social</p>
                                    <div class="reward-cost">900 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('horas_20', 900)">
                                    Canjear
                                </button>
                            </div>

                            <!-- 30 Horas -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-clock" style="color: #22c55e;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>30 Horas</h4>
                                    <p>Liberación de 30 horas de servicio social</p>
                                    <div class="reward-cost">1300 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('horas_30', 1300)">
                                    Canjear
                                </button>
                            </div>

                            <!-- 40 Horas -->
                            <div class="reward-card">
                                <div class="reward-icon">
                                    <i class="fas fa-clock" style="color: #22c55e;"></i>
                                </div>
                                <div class="reward-info">
                                    <h4>40 Horas</h4>
                                    <p>Liberación de 40 horas de servicio social</p>
                                    <div class="reward-cost">1600 puntos</div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearRecompensa('horas_40', 1600)">
                                    Canjear
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de Logros Especiales -->
                    <div class="achievements-section">
                        <h3 class="section-title">Logros Especiales</h3>
                        <div class="achievements-grid">
                            <div class="achievement-card">
                                <div class="achievement-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Líder Ambiental</h4>
                                    <p>Dirige un proyecto comunitario exitoso</p>
                                    <div class="achievement-reward">+200 puntos</div>
                                </div>
                            </div>

                            <div class="achievement-card">
                                <div class="achievement-icon">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Innovador Sostenible</h4>
                                    <p>Propón una solución innovadora</p>
                                    <div class="achievement-reward">+150 puntos</div>
                                </div>
                            </div>

                            <div class="achievement-card">
                                <div class="achievement-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Agente de Cambio</h4>
                                    <p>Involucra a 10+ personas en actividades</p>
                                    <div class="achievement-reward">+100 puntos</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de Progreso -->
                    <div class="progress-section">
                        <h3 class="section-title">Tu Progreso en el Concurso</h3>
                        <div class="progress-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="total-points">350</div>
                                <div class="stat-label">Puntos Totales</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="challenges-completed">5</div>
                                <div class="stat-label">Desafíos Completados</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="current-rank">#12</div>
                                <div class="stat-label">Posición Actual</div>
                            </div>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 45%"></div>
                            </div>
                            <div class="progress-labels">
                                <span>Bronce</span>
                                <span>Plata</span>
                                <span>Oro</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de administración de cupones (solo visible para administradores) -->
                    <div id="admin-cupones" class="admin-section" style="display: none;">
                        <h3 class="card-title">Administrar Cupones</h3>
                        
                        <div class="form-group">
                            <label for="coupon-code">Código del Cupón</label>
                            <input type="text" id="coupon-code" placeholder="Ej: VERANO2025">
                        </div>
                        <div class="form-group">
                            <label for="coupon-description">Descripción</label>
                            <input type="text" id="coupon-description" placeholder="Ej: 20% de descuento en libros">
                        </div>
                        <button class="btn btn-primary" onclick="agregarCupon()">Agregar Cupón</button>

                        <h4 style="margin-top: 2rem;">Cupones Activos</h4>
                        <ul id="coupon-list" class="coupon-list">
                            <!-- Los cupones se agregarán aquí dinámicamente -->
                        </ul>
                    </div>

                    <!-- Sección de Reportes (solo visible para administradores) -->
                    <div id="admin-reportes" class="admin-section" style="display: none;">
                        <h3 class="card-title">Generar Reportes</h3>
                        <p class="section-description">Genera reportes detallados de usuarios por grupo y semestre.</p>
                        
                        <div class="reports-controls">
                            <div class="form-group">
                                <label for="report-semestre">Seleccionar Semestre</label>
                                <select id="report-semestre" onchange="cargarGrupos()">
                                    <option value="">Todos los semestres</option>
                                    <option value="1">Primer Semestre</option>
                                    <option value="2">Segundo Semestre</option>
                                    <option value="3">Tercer Semestre</option>
                                    <option value="4">Cuarto Semestre</option>
                                    <option value="5">Quinto Semestre</option>
                                    <option value="6">Sexto Semestre</option>
                                    <option value="7">Séptimo Semestre</option>
                                    <option value="8">Octavo Semestre</option>
                                    <option value="9">Noveno Semestre</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="report-grupo">Seleccionar Grupo</label>
                                <select id="report-grupo" onchange="generarReporte()">
                                    <option value="">Todos los grupos</option>
                                </select>
                            </div>
                            
                            <div class="report-actions">
                                <button class="btn btn-primary" onclick="generarReporteCompleto()">
                                    <i class="fas fa-file-pdf"></i>
                                    Generar Reporte Completo
                                </button>
                                <button class="btn btn-secondary" onclick="exportarExcel()">
                                    <i class="fas fa-file-excel"></i>
                                    Exportar a Excel
                                </button>
                            </div>
                        </div>

                        <div class="report-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="total-usuarios">0</div>
                                    <div class="stat-label">Total de Usuarios</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="usuarios-activos">0</div>
                                    <div class="stat-label">Usuarios Activos</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-number" id="promedio-puntos">0</div>
                                    <div class="stat-label">Promedio de Puntos</div>
                                </div>
                            </div>
                        </div>

                        <div class="report-table-container">
                            <h4>Lista de Usuarios</h4>
                            <div class="table-controls">
                                <input type="text" id="search-users" placeholder="Buscar usuarios..." onkeyup="filtrarUsuarios()">
                                <select id="sort-users" onchange="ordenarUsuarios()">
                                    <option value="nombre">Ordenar por Nombre</option>
                                    <option value="puntos">Ordenar por Puntos</option>
                                    <option value="grado">Ordenar por Semestre</option>
                                    <option value="fecha">Ordenar por Fecha de Registro</option>
                                </select>
                            </div>
                            <div class="table-container">
                                <table id="users-table" class="report-table">
                                    <thead>
                                        <tr>
                                            <th>Nombre Completo</th>
                                            <th>Matrícula</th>
                                            <th>Semestre</th>
                                            <th>Materia</th>
                                            <th>Puntos</th>
                                            <th>Nivel</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="users-table-body">
                                        <!-- Los usuarios se cargarán aquí dinámicamente -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de Administración de Desafíos (solo visible para administradores) -->
                    <div id="admin-desafios" class="admin-section" style="display: none;">
                        <h3 class="card-title">Administrar Desafíos</h3>
                        <p class="section-description">Crea y gestiona nuevos desafíos para los usuarios.</p>
                        
                        <div class="challenge-form-container">
                            <h4>Crear Nuevo Desafío</h4>
                            <form id="formNuevoDesafio" onsubmit="crearNuevoDesafio(event)">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="desafio-titulo">Título del Desafío</label>
                                        <input type="text" id="desafio-titulo" placeholder="Ej: Reciclaje de Papel" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="desafio-dificultad">Dificultad</label>
                                        <select id="desafio-dificultad" required>
                                            <option value="">Seleccionar dificultad</option>
                                            <option value="facil">Fácil</option>
                                            <option value="medio">Medio</option>
                                            <option value="dificil">Difícil</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="desafio-puntos">Puntos a Otorgar</label>
                                        <input type="number" id="desafio-puntos" placeholder="Ej: 100" min="10" max="500" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="desafio-duracion">Duración (días)</label>
                                        <input type="number" id="desafio-duracion" placeholder="Ej: 30" min="1" max="365" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="desafio-descripcion">Descripción</label>
                                    <textarea id="desafio-descripcion" placeholder="Describe el desafío y cómo completarlo..." rows="4" required></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label for="desafio-estado">Estado del Progreso</label>
                                    <input type="text" id="desafio-estado" placeholder="Ej: 0/5 kg o 0/10 acciones" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="desafio-pdf">PDF de Guía (opcional)</label>
                                    <input type="file" id="desafio-pdf" accept=".pdf">
                                    <small class="form-text text-muted">Sube un archivo PDF con las instrucciones del desafío</small>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-plus"></i>
                                        Crear Desafío
                                    </button>
                                    <button type="button" class="btn btn-secondary" onclick="limpiarFormularioDesafio()">
                                        <i class="fas fa-eraser"></i>
                                        Limpiar Formulario
                                    </button>
                                </div>
                            </form>
                        </div>

                        <div class="challenges-list-container">
                            <h4>Desafíos Existentes</h4>
                            <div class="challenges-filters">
                                <select id="filter-admin-challenges" onchange="filtrarDesafiosAdmin()">
                                    <option value="todos">Todos los desafíos</option>
                                    <option value="facil">Solo Fáciles</option>
                                    <option value="medio">Solo Medios</option>
                                    <option value="dificil">Solo Difíciles</option>
                                </select>
                                <button class="btn btn-secondary" onclick="exportarDesafios()">
                                    <i class="fas fa-download"></i>
                                    Exportar Lista
                                </button>
                            </div>
                            
                            <div class="admin-challenges-grid" id="admin-challenges-grid">
                                <!-- Los desafíos se cargarán aquí dinámicamente -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva sección de Videos Educativos -->
            <div id="videos" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Videos Educativos</h2>
                        <p class="section-description">Aprende sobre sostenibilidad ambiental a través de contenido educativo de calidad</p>
                    </div>

                    <div class="video-filters">
                        <button class="video-filter active" onclick="filtrarVideos('todos')">Todos</button>
                        <button class="video-filter" onclick="filtrarVideos('reciclaje')">Reciclaje</button>
                        <button class="video-filter" onclick="filtrarVideos('agua')">Agua</button>
                        <button class="video-filter" onclick="filtrarVideos('plastico')">Plástico</button>
                        <button class="video-filter" onclick="filtrarVideos('consumo')">Consumo Responsable</button>
                    </div>

                    <div class="videos-grid">
                        <!-- Video 1: Reciclaje -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/1pR68oLOLd8/maxresdefault.jpg" alt="Guía de Reciclaje" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('1pR68oLOLd8', 'Guía Completa de Reciclaje', 'Aprende a reciclar correctamente los diferentes tipos de materiales y contribuye a un mundo más sostenible.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Guía Completa de Reciclaje</h3>
                                <p class="video-description">Aprende a reciclar correctamente los diferentes tipos de materiales y contribuye a un mundo más sostenible.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>8:45</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Cuidado del Agua -->
                        <div class="video-card" data-category="agua">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/r3cH7KYhgq8/maxresdefault.jpg" alt="Cuidado del Agua" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('r3cH7KYhgq8', 'Cuidado del Agua', 'Aprende la importancia de cuidar el agua y cómo puedes contribuir a su conservación.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Cuidado del Agua</h3>
                                <p class="video-description">Aprende la importancia de cuidar el agua y cómo puedes contribuir a su conservación.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category agua">Agua</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Ahorra Agua en el Inodoro -->
                        <div class="video-card" data-category="agua">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/3O49Gm_CgLs/maxresdefault.jpg" alt="Ahorra Agua en el Inodoro" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('3O49Gm_CgLs', 'Ahorra Agua en el Inodoro', 'Un truco sencillo para reducir el consumo de agua en cada descarga del inodoro.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Ahorra Agua en el Inodoro</h3>
                                <p class="video-description">Un truco sencillo para reducir el consumo de agua en cada descarga del inodoro.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category agua">Agua</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Como reciclar PET 1 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/SpJhOTTG6X4/maxresdefault.jpg" alt="Cómo Reciclar PET Correctamente" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('SpJhOTTG6X4', 'Cómo Reciclar PET Correctamente', 'Aprende el proceso correcto para reciclar botellas de PET y ayudar al medio ambiente.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Cómo Reciclar PET Correctamente</h3>
                                <p class="video-description">Aprende el proceso correcto para reciclar botellas de PET y ayudar al medio ambiente.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Como reciclar PET 2 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/IC6wWdxj8NU/maxresdefault.jpg" alt="El Proceso de Reciclaje del PET" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('IC6wWdxj8NU', 'El Proceso de Reciclaje del PET', 'Descubre qué sucede con el PET después de que lo depositas en el contenedor de reciclaje.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">El Proceso de Reciclaje del PET</h3>
                                <p class="video-description">Descubre qué sucede con el PET después de que lo depositas en el contenedor de reciclaje.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Reciclaje de Tapas 1 -->
                        <div class="video-card" data-category="plastico">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/A_PsbUlSJUw/maxresdefault.jpg" alt="Reciclaje de Tapas de Plástico" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('A_PsbUlSJUw', 'Reciclaje de Tapas de Plástico', 'Descubre la importancia de reciclar tapas y cómo se transforman.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Reciclaje de Tapas de Plástico</h3>
                                <p class="video-description">Descubre la importancia de reciclar tapas y cómo se transforman.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category plastico">Plástico</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Reciclaje de Tapas 2 -->
                        <div class="video-card" data-category="plastico">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/fxWYKXvZQ1I/maxresdefault.jpg" alt="¿A Dónde Van las Tapitas?" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('fxWYKXvZQ1I', '¿A Dónde Van las Tapitas?', 'Conoce el proceso y el impacto positivo del reciclaje de tapas de plástico.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">¿A Dónde Van las Tapitas?</h3>
                                <p class="video-description">Conoce el proceso y el impacto positivo del reciclaje de tapas de plástico.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category plastico">Plástico</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Reutilizar Ropa 1 -->
                        <div class="video-card" data-category="consumo">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/HTWi9OjSWAw/maxresdefault.jpg" alt="Dale una Segunda Vida a tu Ropa" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('HTWi9OjSWAw', 'Dale una Segunda Vida a tu Ropa', 'Ideas creativas para reutilizar y transformar la ropa que ya no usas.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Dale una Segunda Vida a tu Ropa</h3>
                                <p class="video-description">Ideas creativas para reutilizar y transformar la ropa que ya no usas.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category consumo">Consumo Responsable</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Reutilizar Ropa 2 -->
                        <div class="video-card" data-category="consumo">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/jxXMe1CqoV4/maxresdefault.jpg" alt="Organiza un Trueque de Ropa" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('jxXMe1CqoV4', 'Organiza un Trueque de Ropa', 'Aprende a organizar un intercambio de prendas con amigos y comunidad.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Organiza un Trueque de Ropa</h3>
                                <p class="video-description">Aprende a organizar un intercambio de prendas con amigos y comunidad.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category consumo">Consumo Responsable</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video Reutilizar Ropa 3 -->
                        <div class="video-card" data-category="consumo">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/nVsi1yjWGMQ/maxresdefault.jpg" alt="Moda Sostenible: Más Allá del Trueque" onload="this.classList.add('loaded')">
                                <div class="video-play-button" onclick="abrirVideo('nVsi1yjWGMQ', 'Moda Sostenible: Más Allá del Trueque', 'Explora diferentes formas de tener un armario más sostenible y consciente.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Moda Sostenible: Más Allá del Trueque</h3>
                                <p class="video-description">Explora diferentes formas de tener un armario más sostenible y consciente.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>Desconocido</span>
                                    </div>
                                    <span class="video-category consumo">Consumo Responsable</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para reproducir videos -->
    <div id="videoModal" class="video-modal">
        <div class="video-modal-content">
            <div class="video-modal-header">
                <h3 class="video-modal-title" id="videoTitle">Título del video</h3>
                <button class="video-modal-close" onclick="cerrarVideo()">&times;</button>
            </div>
            <div class="video-modal-body">
                <iframe id="videoIframe" class="video-iframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-modal-footer">
                <p class="video-description-full" id="videoDescription">Descripción completa del video.</p>
            </div>
        </div>
    </div>

    <!-- Modal de Perfil -->
    <div id="perfilModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Mi Perfil</h3>
                <button class="close-modal" onclick="cerrarModalPerfil()">&times;</button>
            </div>
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-value" id="nivel-perfil">1</div>
                    <div class="stat-label">Nivel</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="puntos-perfil">0</div>
                    <div class="stat-label">Puntos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="insignias-perfil">0</div>
                    <div class="stat-label">Insignias</div>
                </div>
            </div>
            <form id="formPerfil" onsubmit="actualizarPerfil(event)">
                <div class="form-group">
                    <label for="perfilNombre">Nombre</label>
                    <input type="text" id="perfilNombre" required>
                </div>
                <div class="form-group">
                    <label for="perfilApellidoPaterno">Apellido Paterno</label>
                    <input type="text" id="perfilApellidoPaterno" required>
                </div>
                <div class="form-group">
                    <label for="perfilApellidoMaterno">Apellido Materno</label>
                    <input type="text" id="perfilApellidoMaterno" required>
                </div>
                <div class="form-group">
                    <label for="perfilEmail">Correo Electrónico</label>
                    <input type="email" id="perfilEmail" required>
                </div>
                <div class="form-group">
                    <label for="perfilClave">Nueva Contraseña (dejar en blanco para mantener la actual)</label>
                    <input type="password" id="perfilClave" placeholder="••••••••">
                </div>
                
                <!-- Sección para subir credencial -->
                <div class="form-group">
                    <label for="credencialUpload">Credencial (Identificación oficial)</label>
                    <div class="credential-upload-container">
                        <div id="credencialPreview" class="credential-preview">
                            <div class="upload-placeholder" id="uploadPlaceholder">
                                <i class="fas fa-id-card"></i>
                                <span>Sube tu credencial</span>
                            </div>
                            <img id="credencialImage" style="display: none; max-width: 100%; max-height: 150px; border-radius: 8px;">
                        </div>
                        <div class="credential-buttons">
                            <label for="credencialUpload" class="btn btn-secondary btn-sm">
                                <i class="fas fa-upload"></i> Seleccionar imagen
                            </label>
                            <button type="button" id="removeCredencial" onclick="eliminarCredencial()" class="btn btn-danger btn-sm" style="display: none;">
                                <i class="fas fa-trash"></i> Eliminar
                            </button>
                        </div>
                        <input type="file" id="credencialUpload" accept="image/*" style="display: none;" onchange="previewCredencial(event)">
                        <small class="form-text text-muted">Sube una imagen clara de tu identificación oficial para verificar tu cuenta. Formatos aceptados: JPG, PNG.</small>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    Guardar Cambios
                </button>
            </form>
        </div>
    </div>

    <!-- Modal de Quiz -->
    <div id="quizModal" class="modal" style="display: none;">
        <div class="modal-content quiz-modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="quizTitulo">Quiz: Nombre del Desafío</h3>
                <button class="close-modal" onclick="cerrarModalQuiz()">&times;</button>
            </div>
            <div class="quiz-container">
                <div class="quiz-pdf-viewer" id="pdfViewer">
                    <div class="pdf-placeholder">
                        <i class="fas fa-file-pdf"></i>
                        <span>Cargando material educativo...</span>
                    </div>
                    <iframe id="pdfFrame" style="width: 100%; height: 300px; border: none; display: none;"></iframe>
                </div>
                <div class="quiz-questions" id="quizQuestions">
                    <!-- Las preguntas se generarán dinámicamente -->
                </div>
                <div class="quiz-controls">
                    <button type="button" class="btn btn-primary" id="submitQuiz" onclick="evaluarQuiz()">
                        <i class="fas fa-check-circle"></i> Enviar respuestas
                    </button>
                </div>
                <div class="quiz-results" id="quizResults" style="display: none;">
                    <div class="result-header">
                        <h3>Resultados del Quiz</h3>
                        <div class="score">
                            Puntuación: <span id="quizScore">0/0</span>
                        </div>
                    </div>
                    <div class="result-message" id="resultMessage"></div>
                    <div class="quiz-actions">
                        <button type="button" class="btn btn-secondary" onclick="cerrarModalQuiz()">
                            <i class="fas fa-times"></i> Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje de Bienvenida -->
    <div id="welcomeOverlay" class="welcome-overlay" style="display: none;">
        <div class="welcome-message">
            <div class="welcome-icon">
                <i class="fas fa-leaf"></i>
            </div>
            <h2 class="welcome-title">¡Bienvenido a Econnect!</h2>
            <p class="welcome-text">Gracias por unirte a nuestra comunidad comprometida con el medio ambiente. Juntos podemos crear un impacto positivo en nuestro planeta.</p>
            <button class="welcome-button" onclick="cerrarBienvenida()">
                Comenzar mi viaje verde
            </button>
        </div>
    </div>

    <!-- Modal de Recuperar Contraseña -->
    <div id="recuperarContrasenaModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-key"></i> Recuperar Contraseña
                </h3>
                <button class="close-modal" onclick="cerrarModalRecuperarContrasena()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Ingresa tu correo electrónico o matrícula para recibir instrucciones de recuperación de contraseña.
                </p>
                <form id="formRecuperarContrasena" onsubmit="recuperarContrasena(event)">
                    <div class="form-group">
                        <label for="identificadorRecuperar">Correo Electrónico o Matrícula</label>
                        <input type="text" id="identificadorRecuperar" placeholder="Ingresa tu correo o matrícula" required>
                    </div>
                    <div class="form-group">
                        <label for="nuevaContrasena">Nueva Contraseña</label>
                        <input type="password" id="nuevaContrasena" placeholder="••••••••" required>
                        <small class="form-text text-muted">La contraseña debe tener al menos 6 caracteres</small>
                    </div>
                    <div class="form-group">
                        <label for="confirmarContrasena">Confirmar Nueva Contraseña</label>
                        <input type="password" id="confirmarContrasena" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Cambiar Contraseña
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>